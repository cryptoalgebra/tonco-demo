import java.math.BigInteger
import java.util.TreeMap
import ToncoAMM;

fun main() {
    println("Starting test!")
    val ticks = TreeMap<Long, BigInteger>()
    ticks [-887220] = BigInteger("300868619548")
    ticks [-160380] = BigInteger("1218093")
    ticks [-111060] = BigInteger("39536257")
    ticks [-108180] = BigInteger("-39536257")
    ticks [-92100] = BigInteger("46185106")
    ticks [-85200] = BigInteger("1461027")
    ticks [-82200] = BigInteger("110596020079")
    ticks [-76500] = BigInteger("135024817502")
    ticks [-72480] = BigInteger("129033008485")
    ticks [-69060] = BigInteger("-77774687")
    ticks [-68460] = BigInteger("2041292")
    ticks [-64980] = BigInteger("489907513071")
    ticks [-62280] = BigInteger("267580474690")
    ticks [-62220] = BigInteger("269451032507")
    ticks [-62160] = BigInteger("295165695071")
    ticks [-62100] = BigInteger("425571598620")
    ticks [-61980] = BigInteger("973302788116")
    ticks [-61860] = BigInteger("550218264175")
    ticks [-60240] = BigInteger("458199213847")
    ticks [-58140] = BigInteger("-550218264175")
    ticks [-58080] = BigInteger("968889157362")
    ticks [-57420] = BigInteger("767159225432")
    ticks [-57360] = BigInteger("-425571598620")
    ticks [-57300] = BigInteger("-429173114938")
    ticks [-57240] = BigInteger("719005218936")
    ticks [-57180] = BigInteger("1266833256173")
    ticks [-57060] = BigInteger("111791978361")
    ticks [-56580] = BigInteger("44582954218")
    ticks [-56460] = BigInteger("-489907513071")
    ticks [-56400] = BigInteger("-135024817502")
    ticks [-56160] = BigInteger("-458199213847")
    ticks [-55680] = BigInteger("-304823479825")
    ticks [-55620] = BigInteger("-295137649687")
    ticks [-55560] = BigInteger("551301477849")
    ticks [-55440] = BigInteger("-110596020079")
    ticks [-55200] = BigInteger("209222668707")
    ticks [-55140] = BigInteger("-537031507197")
    ticks [-55080] = BigInteger("722711593829")
    ticks [-54960] = BigInteger("73907729585")
    ticks [-54900] = BigInteger("-719005218936")
    ticks [-54840] = BigInteger("-551254581918")
    ticks [-54720] = BigInteger("1114361571694")
    ticks [-54660] = BigInteger("172848132025")
    ticks [-54420] = BigInteger("679453862375")
    ticks [-54360] = BigInteger("479731942")
    ticks [-54300] = BigInteger("339212269834")
    ticks [-54240] = BigInteger("1135978239798")
    ticks [-54060] = BigInteger("-320348721452")
    ticks [-54000] = BigInteger("24120974939")
    ticks [-53880] = BigInteger("4901803161")
    ticks [-53820] = BigInteger("3625564634")
    ticks [-53760] = BigInteger("573365805117")
    ticks [-53580] = BigInteger("64134567260")
    ticks [-53460] = BigInteger("155672209840")
    ticks [-53400] = BigInteger("2750292296")
    ticks [-53340] = BigInteger("146757607574")
    ticks [-53280] = BigInteger("404058770627")
    ticks [-53220] = BigInteger("47523448160")
    ticks [-53160] = BigInteger("276232171276")
    ticks [-53100] = BigInteger("95551109284")
    ticks [-53040] = BigInteger("906870413746")
    ticks [-52980] = BigInteger("2815833236459")
    ticks [-52920] = BigInteger("201543666170")
    ticks [-52860] = BigInteger("259175537080")
    ticks [-52800] = BigInteger("910055629801")
    ticks [-52740] = BigInteger("144159165633")
    ticks [-52680] = BigInteger("107299584525")
    ticks [-52620] = BigInteger("676477240753")
    ticks [-52560] = BigInteger("724584534")
    ticks [-52500] = BigInteger("15530223002")
    ticks [-52440] = BigInteger("271312637437")
    ticks [-52380] = BigInteger("43381282546")
    ticks [-52320] = BigInteger("24051267781")
    ticks [-52260] = BigInteger("5546475779619")
    ticks [-52200] = BigInteger("335359774729")
    ticks [-52140] = BigInteger("935298949910")
    ticks [-52080] = BigInteger("556476166553")
    ticks [-52020] = BigInteger("1839559784573")
    ticks [-51960] = BigInteger("6910707881531")
    ticks [-51900] = BigInteger("608262472487")
    ticks [-51840] = BigInteger("2027823887516")
    ticks [-51780] = BigInteger("448039037573")
    ticks [-51720] = BigInteger("216644258703")
    ticks [-51660] = BigInteger("7615578208262")
    ticks [-51600] = BigInteger("2502330165197")
    ticks [-51540] = BigInteger("1958783550453")
    ticks [-51480] = BigInteger("4495957441482")
    ticks [-51420] = BigInteger("3362148259330")
    ticks [-51360] = BigInteger("1067695350881")
    ticks [-51300] = BigInteger("756029389215")
    ticks [-51240] = BigInteger("25450107288856")
    ticks [-51180] = BigInteger("488270876693")
    ticks [-51120] = BigInteger("550788866261")
    ticks [-51060] = BigInteger("6452367032942")
    ticks [-51000] = BigInteger("222985886385")
    ticks [-50940] = BigInteger("5859351247095")
    ticks [-50880] = BigInteger("8034027963095")
    ticks [-50820] = BigInteger("47745449083")
    ticks [-50760] = BigInteger("11731296069")
    ticks [-50700] = BigInteger("-688368269214")
    ticks [-50640] = BigInteger("-747825413931")
    ticks [-50580] = BigInteger("3634016037584")
    ticks [-50520] = BigInteger("466981509358")
    ticks [-50460] = BigInteger("-9440894612")
    ticks [-50400] = BigInteger("1098471987244")
    ticks [-50340] = BigInteger("-7505056746695")
    ticks [-50280] = BigInteger("-272127430414")
    ticks [-50220] = BigInteger("-23535534406177")
    ticks [-50160] = BigInteger("-12382820099005")
    ticks [-50100] = BigInteger("-227759816810")
    ticks [-50040] = BigInteger("-1523406274016")
    ticks [-49980] = BigInteger("-12262840933")
    ticks [-49920] = BigInteger("-290345480251")
    ticks [-49860] = BigInteger("-1370143360931")
    ticks [-49800] = BigInteger("-1577941795783")
    ticks [-49740] = BigInteger("-634610840837")
    ticks [-49680] = BigInteger("-597200742355")
    ticks [-49620] = BigInteger("-8676125891365")
    ticks [-49560] = BigInteger("-908649844884")
    ticks [-49500] = BigInteger("-1009943988249")
    ticks [-49440] = BigInteger("-641283455244")
    ticks [-49380] = BigInteger("-781293357037")
    ticks [-49320] = BigInteger("-754143057309")
    ticks [-49260] = BigInteger("-2988602654642")
    ticks [-49200] = BigInteger("-864291017979")
    ticks [-49140] = BigInteger("-442844151259")
    ticks [-49080] = BigInteger("-1763270224004")
    ticks [-49020] = BigInteger("-5498874267710")
    ticks [-48960] = BigInteger("-4047434254016")
    ticks [-48900] = BigInteger("-962414034594")
    ticks [-48840] = BigInteger("-8437772242119")
    ticks [-48780] = BigInteger("-1890313906409")
    ticks [-48720] = BigInteger("-1099323532005")
    ticks [-48660] = BigInteger("-2059874549079")
    ticks [-48600] = BigInteger("-126329108479")
    ticks [-48540] = BigInteger("-495788107214")
    ticks [-48480] = BigInteger("-9330947115")
    ticks [-48420] = BigInteger("-225916129850")
    ticks [-48360] = BigInteger("-258890450892")
    ticks [-48300] = BigInteger("-608876216020")
    ticks [-48240] = BigInteger("-181168263243")
    ticks [-48180] = BigInteger("-4658883321")
    ticks [-48120] = BigInteger("-538685620822")
    ticks [-48060] = BigInteger("-1203462385295")
    ticks [-48000] = BigInteger("-1647053729488")
    ticks [-47940] = BigInteger("-149847567945")
    ticks [-47880] = BigInteger("-96763362")
    ticks [-47820] = BigInteger("-19949831147")
    ticks [-47760] = BigInteger("-41599681832")
    ticks [-47700] = BigInteger("-3625564634")
    ticks [-47640] = BigInteger("-7247781113")
    ticks [-47580] = BigInteger("-290125504182")
    ticks [-47340] = BigInteger("-11219860493")
    ticks [-47280] = BigInteger("-239891103")
    ticks [-47220] = BigInteger("-1620822023741")
    ticks [-47160] = BigInteger("-43650053553")
    ticks [-47100] = BigInteger("-1749541454471")
    ticks [-47040] = BigInteger("-48462580959")
    ticks [-46980] = BigInteger("-7587654156")
    ticks [-46920] = BigInteger("-365288715522")
    ticks [-46800] = BigInteger("-52124183398")
    ticks [-46740] = BigInteger("-1402402279")
    ticks [-46620] = BigInteger("-10060034430")
    ticks [-46380] = BigInteger("-3248692090")
    ticks [-46260] = BigInteger("-63273288126")
    ticks [-46140] = BigInteger("-36053288349")
    ticks [-46080] = BigInteger("-2572878699654")
    ticks [-46020] = BigInteger("-1198958726915")
    ticks [-45840] = BigInteger("-808486870860")
    ticks [-45780] = BigInteger("-32909477343")
    ticks [-44820] = BigInteger("59360383230")
    ticks [-44700] = BigInteger("1755340150862")
    ticks [-44640] = BigInteger("-59360383230")
    ticks [-44220] = BigInteger("-1769718269723")
    ticks [-43800] = BigInteger("-111791978361")
    ticks [-43500] = BigInteger("50728110454")
    ticks [-43320] = BigInteger("-50728110454")
    ticks [-40680] = BigInteger("-15534539724")
    ticks [-40560] = BigInteger("-1744")
    ticks [-40440] = BigInteger("-2041292")
    ticks [-40260] = BigInteger("-1651882728")
    ticks [-39120] = BigInteger("2475266046638")
    ticks [-38640] = BigInteger("-2475266046638")
    ticks [-36900] = BigInteger("-44582954218")
    ticks [-36840] = BigInteger("-480690888614")
    ticks [-30000] = BigInteger("-1218093")
    ticks [-29040] = BigInteger("-20234909316")
    ticks [-26340] = BigInteger("1289487295125")
    ticks [-25920] = BigInteger("-1289487295125")
    ticks [887220] = BigInteger("-302436329514")

    var amm = ToncoAMM(
        BigInteger("5978141234308558348417532175"),
        -51688,
        BigInteger("35556096330244"),
        30,        
        ticks
    )
    var swapResult = amm.convertForward(
        BigInteger.ZERO,  // reserves? 
        BigInteger.ZERO,  // reserves? 
        BigInteger("942430237497") * BigInteger("2"),
        SwapDirection.FORWARD
    )


    println(swapResult)
    println("Result ${swapResult.amount1} expected ${-10656520446}")
    
}